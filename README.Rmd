---
output: github_document
always_allow_html: yes
editor_options:
  markdown:
    wrap: sentence
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, setup, echo = FALSE, message = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  tidy = FALSE,
  error = FALSE,
  fig.width = 8,
  fig.height = 8)
```

# uncovr

> Test coverage tool for R.

[![](http://www.r-pkg.org/badges/version/uncovr)](http://www.r-pkg.org/pkg/uncovr)
[![CRAN RStudio mirror downloads](http://cranlogs.r-pkg.org/badges/uncovr)](http://www.r-pkg.org/pkg/uncovr)

## Features

### Compatibility

* Integrates with [testthat](https://testthat.r-lib.org/).
* Supports parallel testthat runs out of the box.
* Measures code in R (or other) subprocesses. Suprocesses use a locally
  installed version of the instrumented package.
* Independent release, debug and coverage builds. Independent builds
  for R versions, different platforms, with Independent caches. Switch
  between builds quickly and efficiently.
* Supports covr's exclusion file and exclusion markers.
* Supports all of R's class systems.
* Supports lcov output.

### Instrumentation

* Function coverage. Counts how many times R (and C, C++, etc.) functions
  were called.
* Measures R code in top-level expressions, that run at install time,
  measures R code in `.onLoad()`, etc. functions.

### Reporting

* Terminal report, with line and function coverage, and a list of hyperlinked
  uncovered line intervals.
* Summaries for (sub)directories.
* HTML report including a summary table and details report for each file.
* Upload test coverage results to <https://codecov.io>.

### Performance

* Fast instrumentation and caching.
* Fast coverage counters. The instrumentation has minimal overhead for most
  test suites.
* Fast gcov parser.
* Fast HTML report generator.
* Stores last test results and last coverage results.
* Can rerun failing tests.
* Can filter test files and output files.

## Installation

```{r eval = FALSE}
pak::pkg_install("gaborcsardi/uncovr")
```

## Usage

| Function      | Description                                            |
|:--------------|:-------------------------------------------------------|
| `builds()`    | List all builds.                                       |
| `reload()`    | (Re)load local package tree.                           |
| `test()`      | Run package tests.                                     |
| `report()`    | Generate HTML coverage report.                         |
| `last()`      | Print last test and coverage results.                  |
| `retest()`    | Rerun failing tests.                                   |
| `lcov()`      | Create LCOV coverage report.                           |
| `codecov()`   | Upload test coverage results to [codecov.io](https://codecov.io) |
| `document()`  | Use roxygen2 to (re)generated package manual.          |
| `install()`   | Install local package tree.                            |

## License

MIT @ Posit, PBC
